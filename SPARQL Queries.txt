Q1) How does the ratio of Out of school and completion rates differ based on More developed and less developed countries for males in upper secondary schools ?

---   
    PREFIX oo: <http://www.kdeproject.owl/>  
    PREFIX foaf: <http://xmlns.com/foaf/0.1/> 

    select ?ratio ?devRegion where { 
        ?s1 a oo:CR_US_GenderRates.
        ?s2 a oo:OOS_US_GenderRates.
        ?s1 oo:malepercent ?completionRate.
        ?s2 oo:malepercent ?outOfSchoolRate.
        ?s1 oo:forISO ?iso.
        ?s2 oo:forISO ?iso.
        ?iso foaf:DevelopmentRegions ?devRegion
        BIND ((?completionRate/?outOfSchoolRate) AS ?ratio)
       
    }
    ORDER BY(?devRegion)   

Q2) Which country has the highest completion rate and which has the highest out of school rates for females in lower secondary ? Do they both belong to the same development regions or different?

--- 

       
PREFIX oo: <http://www.kdeproject.owl/> 
PREFIX foaf: <http://xmlns.com/foaf/0.1/> 

SELECT ?country  ?devRegion ?femalecompletionRate ?femaleoutOfSchoolRate
WHERE  { {
  ?s oo:femalepercent ?femalecompletionRate .
  ?s oo:forISO ?iso.
  ?iso oo:representsCountry ?country.
  ?iso foaf:DevelopmentRegions ?devRegion
            
       
  FILTER EXISTS {
{ SELECT (MAX (?completionRate) AS ?MaxcompletionRate){
     ?s1 a oo:CR_LS_GenderRates.
     ?s1 oo:femalepercent ?completionRate.   
       }
     }
     FILTER ( ?femalecompletionRate = ?MaxcompletionRate )
  }

 } UNION  {
   ?s oo:femalepercent ?femaleoutOfSchoolRate .
  ?s oo:forISO ?iso.
  ?iso oo:representsCountry ?country.
  ?iso foaf:DevelopmentRegions ?devRegion
  FILTER EXISTS {
{ SELECT (MAX (?outOfSchoolRate) AS ?MaxoutOfSchoolRate){
     ?s2 a oo:OOS_LS_GenderRates.
     ?s2 oo:femalepercent ?outOfSchoolRate.   
       }
     }
     FILTER ( ?femaleoutOfSchoolRate = ?MaxoutOfSchoolRate )
  }
}
 } 


Q3) What percentage of females belonging to least developed regions were able to perform the task of copying or moving a file? 
Group the results based on Unicef Regions.

----
      PREFIX oo: <http://www.kdeproject.owl/>  
      PREFIX foaf: <http://xmlns.com/foaf/0.1/> 

      select  ?unicefRegion (SUM(?value) AS ?SumOfTaskPerformedPercentagePerUnicefRegion) where { 
      ?iso foaf:DevelopmentRegions "Least Developed".
      ?iso oo:representsCountry ?country.
      ?country oo:countryName ?name.
      ?country oo:hasUnicefRegion ?unicefRegion.
      ?unicefRegion oo:forGender ?gender.
      ?gender oo:genderName "Female".
      ?gender oo:performsTask ?taskPerformed.
      ?taskPerformed oo:COP_FOLD_FILE ?value

      }
      GROUP BY(?unicefRegion)

Q4) What is the corelation of completionRates and out of School Rates for Upper Secondary students with the student's area of residence(Rural/Urban)?

----
      PREFIX oo: <http://www.kdeproject.owl/>  
    PREFIX foaf: <http://xmlns.com/foaf/0.1/>  

    select  ?countryName ?ruralCompletionRates ?urbanCompletionRates ?ruraloutOfSchoolRates ?urbanoutOfSchoolRates where { 
     ?demography a oo:CR_US_Demography.
     ?demography2 a oo:OOS_US_Demography.
     ?demography oo:forISO ?iso  .
     ?demography2 oo:forISO ?iso  .
     ?iso oo:representsCountry ?country.
     ?country oo:countryName ?countryName.
     ?demography oo:ruralResidence ?ruralCompletionRates.
     ?demography oo:urbanResidence ?urbanCompletionRates.  
     ?demography2 oo:ruralResidence ?ruraloutOfSchoolRates.
     ?demography2 oo:urbanResidence ?urbanoutOfSchoolRates.  
    }


 Q5) How does the Upper Secondary out-of-school rates of males in Indonesia compare with their completion rates ?

 --- 
    PREFIX oo: <http://www.kdeproject.owl/> 

select ?maleCompletionRate ?MaleOutOfSchoolRate  where { 
    ?s1 a oo:CR_US_GenderRates.
    ?s2 a oo:OOS_US_GenderRates.
    ?s1 oo:malepercent ?maleCompletionRate.
    ?s2 oo:malepercent ?MaleOutOfSchoolRate.
    ?s1 oo:forISO ?iso.
    ?s2 oo:forISO ?iso.
    ?iso oo:representsCountry oo:Indonesia    
}



// Test Query
    |
    |
   \|/
PREFIX oo: <http://www.kdeproject.owl/> 

select (MIN (?completionRate) AS ?MIN) (MAX (?completionRate) AS ?MAX)   where { 
    ?s1 a oo:CR_LS_GenderRates.
#    ?s2 a oo:OOS_LS_GenderRates.
    ?s1 oo:femalepercent ?completionRate.
#    ?s2 oo:femalepercent ?outOfSchoolRate.
    ?s1 oo:forISO ?iso.
#    ?s2 oo:forISO ?iso.
    ?iso oo:representsCountry ?country.
    ?country oo:hasSubRegion "SA"    
}

Q6) Which country in region ECA has the most percentage of females who were able to create a Powerpoint presentation?
PREFIX oo:<http://www.kdeproject.owl/> 
select ?country ?ppt where { 
    ?iso a oo:ISO .
    ?iso oo:representsCountry ?country .
    ?country oo:hasSubRegion ?subRegion .
    ?subRegion oo:hasRegion ?Region .
    ?Region oo:regionName ?name_of_Region .
    ?country oo:hasUnicefRegion ?unicefRegion . 
    ?uniefRegion oo:unicefRegionName ?name . 
    ?unicefRegion oo:forGender ?gender .
    ?gender oo:performsTask ?task .
    ?task oo:PRESENTATION_WITH_CONTENT ?ppt .
    FILTER(?name_of_Region="ECA" && ?subRegion = ?unicefRegion)
    } LIMIT 1

Q7) What percentage of the poor people have installed software in the computer and completed their education?
PREFIX oo:<http://www.kdeproject.owl/> 
select ?install_software where { 
    ?s1 a oo:CR_US_WealthQuintile .
    ?s1 oo:poorestquintile ?poor .
    ?s1 oo:forISO ?iso . 
    ?iso oo:representsCountry ?country .
    ?country oo:hasSubRegion ?subRegion .
    ?subRegion oo:hasRegion ?Region .
    ?Region oo:regionName ?name_of_Region .
    ?country oo:hasUnicefRegion ?unicefRegion . 
    ?uniefRegion oo:unicefRegionName ?name . 
    ?unicefRegion oo:forGender ?gender .
#    ?gender oo:hasWealthQ ?wealth .
#    ?wealth oo:ictWealthQ ?weath_q .
#    ?wealth oo:performsTask ?task .
    ?gender oo:performsTask ?task .
    ?task oo:INSTALL_SOFTWARE ?install_software . 
    FILTER(?poor>0 && ?subRegion = ?unicefRegion)
    } LIMIT 1

Q8) Find the country with maximum Email Attachment Percentage and for that country compute its totalCompletion and totalOutOfSchool Population.

PREFIX oo: <http://www.kdeproject.owl/> 
SELECT (?name as ?CountryName) (?Sum as ?AttachmentPercentage) ?totalCompletionRate ?totalOutOfSchoolRate WHERE{
    ?s1 a oo:CR_US_GenderRates.
    ?s2 a oo:OOS_US_GenderRates.
    ?s1 oo:femalepercent ?femaleCompletionRate.
    ?s2 oo:femalepercent ?femaleOutOfSchoolRate.
    ?s1 oo:malepercent ?maleCompletionRate.
    ?s2 oo:malepercent ?maleOutOfSchoolRate.
    ?s1 oo:forISO ?ISO . 
    ?s2 oo:forISO ?ISO . 
#    ?ISO a oo:ISO .
    ?ISO oo:representsCountry ?COUNTRY .
    ?COUNTRY oo:countryName ?name .
    FILTER(?COUNTRY = ?country)
    BIND(?femaleCompletionRate + ?maleCompletionRate as ?totalCompletionRate)
    BIND(?maleOutOfSchoolRate + ?femaleOutOfSchoolRate as ?totalOutOfSchoolRate)
    {
        select ?country (SUM(?Attachment) as ?Sum) where { 
                ?iso a oo:ISO.
                ?iso oo:representsCountry ?country .
                ?country oo:hasUnicefRegion ?unicefRegion . 
                ?unicefRegion oo:forGender ?gender .
                ?gender oo:genderName ?genderName .
                ?gender oo:performsTask ?task . 
                ?task oo:EMAIL_WITH_ATTACHMENT ?Attachment .
            }
		GROUP BY(?country)
        ORDER BY DESC(?Sum)
        LIMIT 1
    }
    
}
Q9) Find the average completion and out of school rates for countries in all the wealth quintiles(Poorest to richest)?.  What countries has their completion rate and out of school rates above the threshold (avg. values) ?
PREFIX oo:<http://www.kdeproject.owl/> 
SELECT DISTINCT ?countryCM  ?countryOOS  WHERE{
{select ?countryCM where { 
    ?w_q a oo:CR_LS_WealthQuintile .
    ?w_q oo:poorestquintile ?poor_cm .
    ?w_q  oo:forISO ?isoCM .
    ?isoCM oo:representsCountry ?countryCM .
    ?w_qOOS a oo:OOS_LS_WealthQuintile .
    ?w_qOOS oo:poorestquintile ?poor_oos .
    ?w_qOOS  oo:forISO ?isoOOS .
    ?isoOOS oo:representsCountry  ?countryOOS .
    FILTER(?poor_cm > ?POOR)    	 
    {
        SELECT (AVG(?poorCM) as ?POOR) (AVG(?poorOOS) as ?POOR_OOS ) where {
            ?wealth_quintile a oo:CR_LS_WealthQuintile .
            ?wealth_quintile oo:poorestquintile ?poorCM .
            ?wealth_quintile  oo:forISO ?iso .
            ?wealth_quintileOOS a oo:OOS_LS_WealthQuintile .
            ?wealth_quintileOOS oo:poorestquintile ?poorOOS .
        } 
    }
} 
}

UNION
	{
        select ?countryOOS  where { 
            ?w_qOOS a oo:OOS_LS_WealthQuintile .
            ?w_qOOS oo:poorestquintile ?poor_oos .
            ?w_qOOS  oo:forISO ?isoOOS .
            ?isoOOS oo:representsCountry  ?countryOOS .
            FILTER(?poor_oos > ?POOR_OOS)    	 
            {
                SELECT (AVG(?poorOOS) as ?POOR_OOS ) where {
                    ?wealth_quintileOOS a oo:OOS_LS_WealthQuintile .
                    ?wealth_quintileOOS oo:poorestquintile ?poorOOS .
                } 
            }
        } 
	}
} 


Q10)  The country with the maximum completion rate for females in upper secondary belongs to which region? What are the corresponding out-of-school rates of females for this country?
PREFIX oo: <http://www.kdeproject.owl/> 
SELECT ?completoos ?country ?reg WHERE {
     	?s2 a oo:OOS_US_GenderRates.
        ?s2 oo:femalepercent  ?completoos .
        ?s2 oo:forISO ?iso_oos .
        ?iso_oos oo:representsCountry ?country_oos .
    	?country_oos oo:hasSubRegion ?sub_reg .
    	?sub_reg  oo:hasRegion ?reg .
        FILTER(?country_oos = ?country)
        
        {SELECT ?country WHERE{
                ?GenderLS a oo:CR_US_GenderRates.
                ?GenderLS oo:femalepercent ?completionRate_LS.
                ?GenderLS oo:forISO ?iso.
                ?iso oo:representsCountry ?country . 
                FILTER(?completionRate_LS = ?MAX_GenderRate)
                {
                    select (MAX(?completionRate) AS ?MAX_GenderRate)  where { 
                            ?s1 a oo:CR_US_GenderRates.
                            ?s1 oo:femalepercent ?completionRate. 
                        }
                }
        }
    }
}