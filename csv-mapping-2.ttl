#First structure in classes and properties
#Second to add ontologies
#Third is to join tables together
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix dbpedia: <http://dbpedia.org/ontology/> .
@prefix swpo: <http://sw-portal.deri.org/ontologies/swportal#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ourontology: <http://www.kdeproject.owl/> .


<#Lower_SecondaryTriplesMap>
         a rr:TriplesMap ; 
         rr:logicalTable [ rr:tableName "CompletionRate_LowerSecondary" ] ;
         rr:subjectMap [
               rr:template "http://www.kdeproject.owl/{ISO}" ;
               rr:class ourontology:ISO ;
         ] ;

         rr:predicateObjectMap [
               rr:predicate ourontology:name ;
               rr:objectMap [ rr:column "COUNTRY" ] ;
         ] ;

         rr:predicateObjectMap [
               rr:predicate foaf:DevelopmentRegions;
               rr:objectMap [ rr:column "DEVELOPMENTREGIONS" ] ;
         ] ;
         .

<#Lower_SecondaryGenderRates>   
         a rr:TriplesMap ; 
         rr:logicalTable [ rr:tableName "CompletionRate_LowerSecondary" ] ;
              rr:subjectMap [
               rr:template "http://www.kdeproject.owl/CR_LS_Gender{ISO}" ;
               rr:class ourontology:CR_LS_GenderRates ;
         ] ;               
         rr:predicateObjectMap [
               rr:predicate ourontology:femalepercent;
               rr:objectMap [ rr:column "FEMALE";
               rr:datatype xsd:integer; ] ;
         ] ; 
         rr:predicateObjectMap [
               rr:predicate ourontology:malepercent;
               rr:objectMap [ rr:column "MALE";
               rr:datatype xsd:integer; ] ;
         ] ; 
         rr:predicateObjectMap [
            rr:predicate ourontology:forISO;
            rr:objectMap [
            rr:parentTriplesMap <#Lower_SecondaryTriplesMap>;
            rr:joinCondition [
                rr:child "ISO";
                rr:parent "ISO";
            ];
        ];
    ]
    .
         

<#Lower_SecondaryDemography>
         a rr:TriplesMap ; 
         rr:logicalTable [ rr:tableName "CompletionRate_LowerSecondary" ] ;
              rr:subjectMap [
               rr:template "http://www.kdeproject.owl/CR_LS_Demography{ISO}" ;
               rr:class ourontology:CR_LS_Demography ;
         ] ;
         rr:predicateObjectMap [
               rr:predicate ourontology:ruralResidence;
               rr:objectMap [ rr:column "RURAL";
               rr:datatype xsd:integer; ] ;
         ] ; 
         rr:predicateObjectMap [
               rr:predicate ourontology:urbanResidence;
               rr:objectMap [ rr:column "URBAN";
               rr:datatype xsd:integer; ] ;
         ] ;          
         rr:predicateObjectMap [
            rr:predicate ourontology:forISO;
            rr:objectMap [
            rr:parentTriplesMap <#Lower_SecondaryTriplesMap>;
            rr:joinCondition [
                rr:child "ISO";
                rr:parent "ISO";
            ];
        ];
    ]
      .

<#Lower_SecondaryWealthQuinitile>
         a rr:TriplesMap ; 
         rr:logicalTable [ rr:tableName "CompletionRate_LowerSecondary" ] ;
              rr:subjectMap [
               rr:template "http://www.kdeproject.owl/CR_LS_WealthQuintile{ISO}" ;
               rr:class ourontology:CR_LS_WealthQuintile ;
         ] ;
         rr:predicateObjectMap [
               rr:predicate ourontology:poorestquintile ;
               rr:objectMap [ rr:column "POOREST";
               rr:datatype xsd:integer;
                ] ;
         ] ;
                 rr:predicateObjectMap [
               rr:predicate ourontology:secondquintile ;
               rr:objectMap [ rr:column "SECOND";
               rr:datatype xsd:integer; ] ;
         ] ;         rr:predicateObjectMap [
               rr:predicate ourontology:middlequintile ;
               rr:objectMap [ rr:column "MIDDLE";
               rr:datatype xsd:integer; ] ;
         ] ; 
                 rr:predicateObjectMap [
               rr:predicate ourontology:fourthquintile ;
               rr:objectMap [ rr:column "FOURTH";
               rr:datatype xsd:integer; ] ;
         ] ;
                 rr:predicateObjectMap [
               rr:predicate ourontology:richerstquintile ;
               rr:objectMap [ rr:column "RICHEST";
               rr:datatype xsd:integer; ] ;
         ] ;
         
            rr:predicateObjectMap [
            rr:predicate ourontology:forISO;
            rr:objectMap [
            rr:parentTriplesMap <#Lower_SecondaryTriplesMap>;
            rr:joinCondition [
                rr:child "ISO";
                rr:parent "ISO";
            ];
        ];
    ]
.